# ç®¡ç†åŠŸèƒ½å®Œå–„

**å®Œæˆæ—¶é—´**: 2025-11-18 15:17  
**åŠŸèƒ½**: å……å€¼å®¡æ ¸æ”¹è¿› + æ”¶æ¬¾ç®¡ç†

---

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. å……å€¼å®¡æ ¸é¡µé¢æ”¹è¿›

#### æ–°å¢ä¿¡æ¯æ˜¾ç¤º
- âœ… è®¢å•å·
- âœ… å……å€¼æ–¹å¼ï¼ˆé“¶è¡Œè½¬è´¦/å¾®ä¿¡/æ”¯ä»˜å®ï¼‰
- âœ… å®¡æ ¸æ—¶é—´
- âœ… å®¡æ ¸å¤‡æ³¨

#### ä¼˜åŒ–å®¡æ ¸åŠŸèƒ½
- âœ… æ”¹è¿›å®¡æ ¸å¯¹è¯æ¡†
- âœ… é€šè¿‡æ—¶æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
- âœ… æ‹’ç»æ—¶å¿…é¡»è¾“å…¥åŸå› 
- âœ… ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…
- âœ… æ›´å¥½çš„é”™è¯¯æç¤º

---

### 2. æ”¶æ¬¾ç®¡ç†åŠŸèƒ½ï¼ˆæ–°å¢ï¼‰

#### åŠŸèƒ½æ¦‚è¿°
è¶…çº§ç®¡ç†å‘˜å¯ä»¥é…ç½®å¹³å°æ”¶æ¬¾æ–¹å¼ï¼š
- âœ… é“¶è¡Œå¡æ”¶æ¬¾
- âœ… å¾®ä¿¡æ”¶æ¬¾ç 
- âœ… æ”¯ä»˜å®æ”¶æ¬¾ç 

#### é“¶è¡Œå¡è®¾ç½®
- é“¶è¡Œåç§°
- é“¶è¡Œè´¦å·
- å¼€æˆ·å
- å¼€æˆ·è¡Œ

#### æ”¶æ¬¾ç è®¾ç½®
- æ”¯æŒä¸Šä¼ äºŒç»´ç å›¾ç‰‡
- å®æ—¶é¢„è§ˆ
- æœ¬åœ°å­˜å‚¨

---

## ğŸ¨ é¡µé¢å±•ç¤º

### å……å€¼å®¡æ ¸é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       å……å€¼ç®¡ç†                   â†   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å¾…å®¡æ ¸] [å·²é€šè¿‡] [å·²æ‹’ç»]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Â¥10,000.00           [å¾…å®¡æ ¸]      â”‚
â”‚  è®¢å•å·: #123                        â”‚
â”‚  ç”¨æˆ·: 13800138000                  â”‚
â”‚  å……å€¼æ–¹å¼: é“¶è¡Œè½¬è´¦                  â”‚
â”‚  ç”³è¯·æ—¶é—´: 2025-11-18 15:00         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  [é€šè¿‡]          [æ‹’ç»]             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Â¥5,000.00            [å·²é€šè¿‡]      â”‚
â”‚  è®¢å•å·: #122                        â”‚
â”‚  ç”¨æˆ·: 13900139000                  â”‚
â”‚  å……å€¼æ–¹å¼: é“¶è¡Œè½¬è´¦                  â”‚
â”‚  ç”³è¯·æ—¶é—´: 2025-11-18 14:30         â”‚
â”‚  å®¡æ ¸æ—¶é—´: 2025-11-18 14:35         â”‚
â”‚  å®¡æ ¸å¤‡æ³¨: å®¡æ ¸é€šè¿‡                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### æ”¶æ¬¾ç®¡ç†é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       æ”¶æ¬¾ç®¡ç†                   â†   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ”¶æ¬¾æ–¹å¼é…ç½®                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é“¶è¡Œå¡æ”¶æ¬¾              â†’          â”‚
â”‚  ä¸­å›½å·¥å•†é“¶è¡Œ                        â”‚
â”‚  6222 0212 3456 7890                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¾®ä¿¡æ”¶æ¬¾ç               â†’          â”‚
â”‚  [äºŒç»´ç å›¾ç‰‡]                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ”¯ä»˜å®æ”¶æ¬¾ç             â†’          â”‚
â”‚  [äºŒç»´ç å›¾ç‰‡]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### å……å€¼é¡µé¢ï¼ˆç”¨æˆ·è§†è§’ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       å……å€¼                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å……å€¼é‡‘é¢                             â”‚
â”‚  [è¯·è¾“å…¥å……å€¼é‡‘é¢]                    â”‚
â”‚                                      â”‚
â”‚  ğŸ“‹ æ”¶æ¬¾ä¿¡æ¯                         â”‚
â”‚  æ”¶æ¬¾æˆ·å   é€Ÿé‡‘ç›ˆç§‘æŠ€æœ‰é™å…¬å¸        â”‚
â”‚  æ”¶æ¬¾è´¦å·   6222 0212 3456 7890     â”‚
â”‚  å¼€æˆ·é“¶è¡Œ   ä¸­å›½å·¥å•†é“¶è¡Œ             â”‚
â”‚  å¼€æˆ·è¡Œ     åŒ—äº¬åˆ†è¡Œ                 â”‚
â”‚                                      â”‚
â”‚  æç¤ºï¼šè¯·ä½¿ç”¨é“¶è¡Œè½¬è´¦åˆ°ä¸Šè¿°è´¦æˆ·...   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         [ç¡®è®¤å……å€¼]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. å……å€¼å®¡æ ¸é¡µé¢æ”¹è¿›

**æ–‡ä»¶**: `frontend/src/pages/admin/Deposits.vue`

**æ–°å¢å­—æ®µæ˜¾ç¤º**:
```vue
<div class="deposit-row">
  <span class="label">è®¢å•å·:</span>
  <span class="value">#{{ deposit.id }}</span>
</div>
<div class="deposit-row">
  <span class="label">å……å€¼æ–¹å¼:</span>
  <span class="value">{{ getMethodText(deposit.method || deposit.Method) }}</span>
</div>
```

**æ”¹è¿›å®¡æ ¸å¯¹è¯æ¡†**:
```javascript
const showReviewDialog = async (depositId, approved) => {
  const result = await showDialog({
    title: approved ? 'ç¡®è®¤é€šè¿‡' : 'æ‹’ç»å®¡æ ¸',
    message: approved ? 'ç¡®è®¤é€šè¿‡è¯¥å……å€¼ç”³è¯·ï¼Ÿ' : 'è¯·è¾“å…¥æ‹’ç»åŸå› ',
    showCancelButton: true,
    showInput: !approved,
    inputPlaceholder: approved ? '' : 'è¯·è¾“å…¥æ‹’ç»åŸå› ï¼ˆå¿…å¡«ï¼‰'
  })
  
  if (!approved && !result) {
    showToast('è¯·è¾“å…¥æ‹’ç»åŸå› ')
    return
  }
  
  // æäº¤å®¡æ ¸
}
```

**è¯¦æƒ…æŸ¥çœ‹**:
```javascript
const showDepositDetail = (deposit) => {
  const detailInfo = [
    `è®¢å•å·ï¼š#${deposit.id}`,
    `é‡‘é¢ï¼šÂ¥${formatMoney(deposit.amount)}`,
    // ... å…¶ä»–ä¿¡æ¯
  ].filter(Boolean).join('\n')
  
  showDialog({
    title: 'å……å€¼è¯¦æƒ…',
    message: detailInfo,
    confirmButtonText: 'å…³é—­'
  })
}
```

---

### 2. æ”¶æ¬¾ç®¡ç†é¡µé¢

**æ–‡ä»¶**: `frontend/src/pages/admin/PaymentSettings.vue`

**æ•°æ®ç»“æ„**:
```javascript
const paymentSettings = ref({
  bank_card: {
    bank_name: 'ä¸­å›½å·¥å•†é“¶è¡Œ',
    account_number: '6222021234567890',
    account_name: 'é€Ÿé‡‘ç›ˆç§‘æŠ€æœ‰é™å…¬å¸',
    branch_name: 'åŒ—äº¬åˆ†è¡Œ'
  },
  wechat_qr: 'data:image/png;base64,...',
  alipay_qr: 'data:image/png;base64,...'
})
```

**ä¿å­˜é€»è¾‘**:
```javascript
const onSaveBankCard = async () => {
  paymentSettings.value.bank_card = { ...bankCardForm.value }
  localStorage.setItem('payment_settings', JSON.stringify(paymentSettings.value))
  showToast('ä¿å­˜æˆåŠŸ')
}
```

**å›¾ç‰‡ä¸Šä¼ **:
```javascript
const afterReadWechat = (file) => {
  const reader = new FileReader()
  reader.onload = (e) => {
    wechatForm.value.qr_url = e.target.result
  }
  reader.readAsDataURL(file.file)
}
```

---

### 3. å……å€¼é¡µé¢é›†æˆ

**æ–‡ä»¶**: `frontend/src/pages/Funds.vue`

**è¯»å–æ”¶æ¬¾ä¿¡æ¯**:
```javascript
const loadPaymentInfo = () => {
  const settings = localStorage.getItem('payment_settings')
  if (settings) {
    paymentInfo.value = JSON.parse(settings)
  }
}
```

**æ˜¾ç¤ºæ”¶æ¬¾ä¿¡æ¯**:
```vue
<van-cell-group title="æ”¶æ¬¾ä¿¡æ¯">
  <van-cell 
    v-if="paymentInfo.bank_card" 
    title="æ”¶æ¬¾æˆ·å" 
    :value="paymentInfo.bank_card.account_name" 
  />
  <van-cell 
    v-if="paymentInfo.bank_card" 
    title="æ”¶æ¬¾è´¦å·" 
    :value="paymentInfo.bank_card.account_number" 
  />
</van-cell-group>
```

---

### 4. è·¯ç”±é…ç½®

**æ–‡ä»¶**: `frontend/src/router/index.js`

```javascript
import PaymentSettings from '../pages/admin/PaymentSettings.vue'

// è·¯ç”±
{ 
  path: '/admin/payment-settings', 
  component: PaymentSettings, 
  meta: { requiresAuth: true, requiresAdmin: true } 
}
```

---

### 5. ç®¡ç†ä¸­å¿ƒå…¥å£

**æ–‡ä»¶**: `frontend/src/pages/Mine.vue`

```vue
<van-cell-group v-if="userStore.isAdmin || userStore.isSupport" title="ç®¡ç†ä¸­å¿ƒ">
  <van-cell title="ç”¨æˆ·ç®¡ç†" is-link to="/admin/users" icon="manager-o" />
  <van-cell title="å……å€¼å®¡æ ¸" is-link to="/admin/deposits" icon="completed" />
  <van-cell title="æç°å®¡æ ¸" is-link to="/admin/withdraws" icon="completed" />
  <!-- æ–°å¢ï¼šä»…è¶…çº§ç®¡ç†å‘˜å¯è§ -->
  <van-cell v-if="userStore.isAdmin" title="æ”¶æ¬¾ç®¡ç†" is-link to="/admin/payment-settings" icon="balance-pay" />
  <van-cell title="ç³»ç»Ÿé…ç½®" is-link to="/admin/config" icon="setting-o" />
</van-cell-group>
```

---

## ğŸ“Š æ•°æ®æµç¨‹

### æ”¶æ¬¾ä¿¡æ¯é…ç½®æµç¨‹

```
è¶…çº§ç®¡ç†å‘˜ç™»å½•
    â†“
è¿›å…¥"æˆ‘çš„" â†’ "ç®¡ç†ä¸­å¿ƒ"
    â†“
ç‚¹å‡»"æ”¶æ¬¾ç®¡ç†"
    â†“
é€‰æ‹©æ”¶æ¬¾æ–¹å¼
    â”œâ”€ é“¶è¡Œå¡ â†’ å¡«å†™é“¶è¡Œä¿¡æ¯ â†’ ä¿å­˜
    â”œâ”€ å¾®ä¿¡ â†’ ä¸Šä¼ äºŒç»´ç  â†’ ä¿å­˜
    â””â”€ æ”¯ä»˜å® â†’ ä¸Šä¼ äºŒç»´ç  â†’ ä¿å­˜
    â†“
æ•°æ®å­˜å‚¨åˆ°localStorage
    â†“
ç”¨æˆ·å……å€¼æ—¶è‡ªåŠ¨æ˜¾ç¤º
```

---

### å……å€¼å®¡æ ¸æµç¨‹

```
ç”¨æˆ·æäº¤å……å€¼ç”³è¯·
    â†“
ç®¡ç†å‘˜è¿›å…¥"å……å€¼å®¡æ ¸"
    â†“
æŸ¥çœ‹å¾…å®¡æ ¸åˆ—è¡¨
    â†“
ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…
    â†“
å®¡æ ¸æ“ä½œ
    â”œâ”€ é€šè¿‡ â†’ ç¡®è®¤ â†’ ç”¨æˆ·å®šé‡‘å¢åŠ 
    â””â”€ æ‹’ç» â†’ è¾“å…¥åŸå›  â†’ ç”¨æˆ·æ”¶åˆ°é€šçŸ¥
    â†“
çŠ¶æ€æ›´æ–°
    â†“
è®°å½•å®¡æ ¸æ—¶é—´å’Œå¤‡æ³¨
```

---

## ğŸ¯ æƒé™æ§åˆ¶

### æ”¶æ¬¾ç®¡ç†
- âœ… ä»…è¶…çº§ç®¡ç†å‘˜å¯è§
- âœ… ä»…è¶…çº§ç®¡ç†å‘˜å¯æ“ä½œ
- âŒ å®¢æœå’Œé”€å”®æ— æƒè®¿é—®

### å……å€¼å®¡æ ¸
- âœ… è¶…çº§ç®¡ç†å‘˜å¯æ“ä½œ
- âœ… å®¢æœå¯æ“ä½œ
- âŒ é”€å”®æ— æƒè®¿é—®

---

## ğŸ’¡ åç»­ä¼˜åŒ–å»ºè®®

### 1. åç«¯APIé›†æˆ

ç›®å‰æ”¶æ¬¾ä¿¡æ¯å­˜å‚¨åœ¨localStorageï¼Œå»ºè®®ï¼š

**åˆ›å»ºæ”¶æ¬¾é…ç½®API**:
```go
// GET /api/v1/admin/payment-settings
// POST /api/v1/admin/payment-settings
type PaymentSettings struct {
    BankCard  *BankCardInfo  `json:"bank_card"`
    WechatQR  string         `json:"wechat_qr"`
    AlipayQR  string         `json:"alipay_qr"`
}
```

---

### 2. å›¾ç‰‡ä¸Šä¼ æœåŠ¡

æ”¯æŒä¸Šä¼ æ”¶æ¬¾ç åˆ°æœåŠ¡å™¨ï¼š

```javascript
const afterReadWechat = async (file) => {
  const formData = new FormData()
  formData.append('file', file.file)
  
  const response = await request.post('/api/v1/upload', formData)
  wechatForm.value.qr_url = response.url
}
```

---

### 3. å……å€¼å‡­è¯ä¸Šä¼ 

å…è®¸ç”¨æˆ·ä¸Šä¼ è½¬è´¦å‡­è¯ï¼š

```vue
<van-field name="voucher" label="è½¬è´¦å‡­è¯">
  <template #input>
    <van-uploader 
      v-model="voucherFiles" 
      :max-count="1"
      :after-read="uploadVoucher"
    />
  </template>
</van-field>
```

---

### 4. å¤šæ”¶æ¬¾è´¦æˆ·æ”¯æŒ

æ”¯æŒé…ç½®å¤šä¸ªæ”¶æ¬¾è´¦æˆ·ï¼Œè½®æµä½¿ç”¨ï¼š

```javascript
const paymentSettings = ref({
  bank_cards: [
    { bank_name: 'å·¥å•†é“¶è¡Œ', account_number: '...' },
    { bank_name: 'å»ºè®¾é“¶è¡Œ', account_number: '...' }
  ],
  // å½“å‰ä½¿ç”¨çš„ç´¢å¼•
  current_bank_index: 0
})
```

---

## âœ… ä¿®æ”¹æ–‡ä»¶åˆ—è¡¨

1. âœ… `frontend/src/pages/admin/Deposits.vue`
   - æ–°å¢è®¢å•å·ã€å……å€¼æ–¹å¼ã€å®¡æ ¸ä¿¡æ¯æ˜¾ç¤º
   - æ”¹è¿›å®¡æ ¸å¯¹è¯æ¡†
   - æ·»åŠ è¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½

2. âœ… `frontend/src/pages/admin/PaymentSettings.vue` (æ–°å»º)
   - é“¶è¡Œå¡é…ç½®
   - å¾®ä¿¡æ”¶æ¬¾ç ä¸Šä¼ 
   - æ”¯ä»˜å®æ”¶æ¬¾ç ä¸Šä¼ 

3. âœ… `frontend/src/pages/Funds.vue`
   - è¯»å–å¹¶æ˜¾ç¤ºæ”¶æ¬¾ä¿¡æ¯
   - åŠ¨æ€æ˜¾ç¤ºç®¡ç†å‘˜é…ç½®çš„è´¦æˆ·

4. âœ… `frontend/src/pages/Mine.vue`
   - æ·»åŠ æ”¶æ¬¾ç®¡ç†å…¥å£

5. âœ… `frontend/src/router/index.js`
   - æ·»åŠ æ”¶æ¬¾ç®¡ç†è·¯ç”±

---

## ğŸ§ª æµ‹è¯•æ¸…å•

### å……å€¼å®¡æ ¸æµ‹è¯•

- [ ] æŸ¥çœ‹å¾…å®¡æ ¸åˆ—è¡¨
- [ ] æŸ¥çœ‹å·²é€šè¿‡åˆ—è¡¨
- [ ] æŸ¥çœ‹å·²æ‹’ç»åˆ—è¡¨
- [ ] ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…
- [ ] é€šè¿‡å®¡æ ¸ï¼ˆè¾“å…¥å¤‡æ³¨ï¼‰
- [ ] æ‹’ç»å®¡æ ¸ï¼ˆå¿…é¡»è¾“å…¥åŸå› ï¼‰
- [ ] éªŒè¯å®¡æ ¸åçŠ¶æ€æ›´æ–°

### æ”¶æ¬¾ç®¡ç†æµ‹è¯•

- [ ] è®¿é—®æ”¶æ¬¾ç®¡ç†é¡µé¢
- [ ] è®¾ç½®é“¶è¡Œå¡ä¿¡æ¯
- [ ] ä¸Šä¼ å¾®ä¿¡æ”¶æ¬¾ç 
- [ ] ä¸Šä¼ æ”¯ä»˜å®æ”¶æ¬¾ç 
- [ ] ä¿å­˜ååˆ·æ–°éªŒè¯
- [ ] å……å€¼é¡µé¢æ˜¾ç¤ºé…ç½®çš„ä¿¡æ¯

### æƒé™æµ‹è¯•

- [ ] è¶…çº§ç®¡ç†å‘˜å¯è§æ”¶æ¬¾ç®¡ç†
- [ ] å®¢æœä¸å¯è§æ”¶æ¬¾ç®¡ç†
- [ ] é”€å”®ä¸å¯è§æ”¶æ¬¾ç®¡ç†

---

**åˆ·æ–°æµè§ˆå™¨ï¼Œæµ‹è¯•æ–°åŠŸèƒ½ï¼** ğŸ‰
